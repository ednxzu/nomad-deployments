{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":dependencyDashboard"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": [
        "job\\.nomad\\.hcl$"
      ],
      "matchStrings": [
        "task\\s+\"[^\"]+\"\\s*\\{[^\\}]*driver\\s*=\\s*\"docker\"[^\\}]*config\\s*\\{[^\\}]*image\\s*=\\s*\"(?<depName>[^:@\"]+)([:@])(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker"
    }
  ],
  "packageRules": [
    {
      "description": "Skip automatic deployment for jobs that will disconnect runners from gitea",
      "matchFileNames": [
        "gitea/job/job.nomad.hcl",
        "traefik/job/job.nomad.hcl",
        "crowdsec/job/job.nomad.hcl"
      ],
      "commitMessageSuffix": "[skip-ci]"
    }
  ]
}